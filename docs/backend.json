
{
  "entities": {
    "Tenant": {
      "title": "Tenant",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "name": { "type": "string" },
        "slug": { "type": "string" },
        "createdAt": { "type": "string", "format": "date-time" },
        "ldapEnabled": { "type": "boolean" },
        "ldapUrl": { "type": "string" },
        "ldapPort": { "type": "string" },
        "ldapBaseDn": { "type": "string" },
        "ldapBindDn": { "type": "string" },
        "ldapBindPassword": { "type": "string" },
        "ldapUserFilter": { "type": "string" }
      },
      "required": ["id", "name", "slug", "createdAt"]
    },
    "User": {
      "title": "User",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "tenantId": { "type": "string" },
        "externalId": { "type": "string" },
        "displayName": { "type": "string" },
        "email": { "type": "string" },
        "department": { "type": "string" },
        "enabled": { "type": "boolean" }
      },
      "required": ["id", "tenantId", "displayName", "email"]
    },
    "Resource": {
      "title": "Resource",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "tenantId": { "type": "string" },
        "name": { "type": "string" },
        "assetType": { "type": "string" },
        "criticality": { "type": "string", "enum": ["low", "medium", "high"] },
        "hasPersonalData": { "type": "boolean" },
        "isInternetExposed": { "type": "boolean" }
      },
      "required": ["id", "tenantId", "name"]
    },
    "Entitlement": {
      "title": "Entitlement",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "resourceId": { "type": "string" },
        "name": { "type": "string" },
        "isAdmin": { "type": "boolean" }
      },
      "required": ["id", "resourceId", "name"]
    },
    "Assignment": {
      "title": "Assignment",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "userId": { "type": "string" },
        "entitlementId": { "type": "string" },
        "status": { "type": "string" },
        "validUntil": { "type": "string" },
        "lastReviewedAt": { "type": "string" }
      },
      "required": ["id", "userId", "entitlementId", "status"]
    },
    "Risk": {
      "title": "Risk",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "tenantId": { "type": "string" },
        "title": { "type": "string" },
        "impact": { "type": "number" },
        "probability": { "type": "number" },
        "status": { "type": "string" }
      },
      "required": ["id", "tenantId", "title"]
    },
    "RiskMeasure": {
      "title": "RiskMeasure",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "riskIds": { "type": "array", "items": { "type": "string" } },
        "resourceIds": { "type": "array", "items": { "type": "string" } },
        "title": { "type": "string" },
        "owner": { "type": "string" },
        "dueDate": { "type": "string" },
        "status": { "type": "string" },
        "isTom": { "type": "boolean" }
      },
      "required": ["id", "title"]
    },
    "RiskControl": {
      "title": "RiskControl",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "measureId": { "type": "string" },
        "title": { "type": "string" },
        "owner": { "type": "string" },
        "status": { "type": "string" },
        "isEffective": { "type": "boolean" },
        "lastCheckDate": { "type": "string" },
        "evidenceDetails": { "type": "string" }
      },
      "required": ["id", "measureId", "title"]
    }
  },
  "auth": {
    "providers": ["password", "anonymous"]
  },
  "firestore": {
    "structure": [
      { "path": "tenants/{tenantId}", "definition": { "schema": { "$ref": "#/backend/entities/Tenant" } } },
      { "path": "users/{userId}", "definition": { "schema": { "$ref": "#/backend/entities/User" } } },
      { "path": "resources/{resourceId}", "definition": { "schema": { "$ref": "#/backend/entities/Resource" } } },
      { "path": "entitlements/{entitlementId}", "definition": { "schema": { "$ref": "#/backend/entities/Entitlement" } } },
      { "path": "assignments/{assignmentId}", "definition": { "schema": { "$ref": "#/backend/entities/Assignment" } } },
      { "path": "risks/{riskId}", "definition": { "schema": { "$ref": "#/backend/entities/Risk" } } },
      { "path": "riskMeasures/{measureId}", "definition": { "schema": { "$ref": "#/backend/entities/RiskMeasure" } } },
      { "path": "riskControls/{controlId}", "definition": { "schema": { "$ref": "#/backend/entities/RiskControl" } } }
    ]
  }
}
