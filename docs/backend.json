
{
  "entities": {
    "Tenant": {
      "title": "Tenant",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "name": { "type": "string" },
        "slug": { "type": "string" },
        "createdAt": { "type": "string", "format": "date-time" },
        "ldapEnabled": { "type": "boolean" },
        "ldapUrl": { "type": "string" },
        "ldapPort": { "type": "string" },
        "ldapBaseDn": { "type": "string" },
        "ldapBindDn": { "type": "string" },
        "ldapBindPassword": { "type": "string" },
        "ldapUserFilter": { "type": "string" }
      },
      "required": ["id", "name", "slug", "createdAt"]
    },
    "ServicePartner": {
      "title": "ServicePartner",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "tenantId": { "type": "string" },
        "name": { "type": "string" },
        "contactPerson": { "type": "string" },
        "email": { "type": "string" },
        "phone": { "type": "string" }
      },
      "required": ["id", "name", "tenantId"]
    },
    "Resource": {
      "title": "Resource",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "tenantId": { "type": "string" },
        "name": { "type": "string" },
        "category": { "type": "string", "enum": ["it_tool", "business_critical", "test", "standard_app", "infrastructure"] },
        "type": { "type": "string", "enum": ["SaaS", "OnPrem", "Private Cloud", "Webshop", "IoT", "Andere"] },
        "operatorId": { "type": "string" },
        "dataClassification": { "type": "string", "enum": ["public", "internal", "confidential", "strictly_confidential"] },
        "dataLocation": { "type": "string" },
        "mfaType": { "type": "string", "enum": ["none", "standard_otp", "standard_mail", "optional_otp", "optional_mail"] },
        "authMethod": { "type": "string" },
        "url": { "type": "string" },
        "documentationUrl": { "type": "string" },
        "criticality": { "type": "string", "enum": ["low", "medium", "high"] },
        "notes": { "type": "string" }
      },
      "required": ["id", "tenantId", "name", "type", "criticality"]
    },
    "Entitlement": {
      "title": "Entitlement",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "tenantId": { "type": "string" },
        "resourceId": { "type": "string" },
        "name": { "type": "string" },
        "riskLevel": { "type": "string", "enum": ["low", "medium", "high"] },
        "isAdmin": { "type": "boolean" },
        "externalMapping": { "type": "string" }
      },
      "required": ["id", "tenantId", "resourceId", "name", "riskLevel"]
    },
    "Assignment": {
      "title": "Assignment",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "tenantId": { "type": "string" },
        "userId": { "type": "string" },
        "entitlementId": { "type": "string" },
        "status": { "type": "string", "enum": ["active", "requested", "removed", "pending_removal"] },
        "grantedBy": { "type": "string" },
        "grantedAt": { "type": "string" },
        "validFrom": { "type": "string" },
        "validUntil": { "type": "string" },
        "jiraIssueKey": { "type": "string" },
        "syncSource": { "type": "string" }
      },
      "required": ["id", "tenantId", "userId", "entitlementId", "status"]
    }
  },
  "auth": {
    "providers": ["password", "anonymous"]
  },
  "firestore": {
    "structure": [
      { "path": "tenants/{tenantId}", "definition": { "schema": { "$ref": "#/backend/entities/Tenant" } } },
      { "path": "servicePartners/{partnerId}", "definition": { "schema": { "$ref": "#/backend/entities/ServicePartner" } } },
      { "path": "users/{userId}", "definition": { "schema": { "$ref": "#/backend/entities/User" } } },
      { "path": "resources/{resourceId}", "definition": { "schema": { "$ref": "#/backend/entities/Resource" } } },
      { "path": "entitlements/{entitlementId}", "definition": { "schema": { "$ref": "#/backend/entities/Entitlement" } } },
      { "path": "assignments/{assignmentId}", "definition": { "schema": { "$ref": "#/backend/entities/Assignment" } } }
    ]
  }
}
