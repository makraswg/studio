
{
  "entities": {
    "Tenant": {
      "title": "Tenant",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "name": { "type": "string" },
        "slug": { "type": "string" },
        "createdAt": { "type": "string", "format": "date-time" },
        "ldapEnabled": { "type": "boolean" },
        "ldapUrl": { "type": "string" },
        "ldapPort": { "type": "string" },
        "ldapBaseDn": { "type": "string" },
        "ldapBindDn": { "type": "string" },
        "ldapBindPassword": { "type": "string" },
        "ldapUserFilter": { "type": "string" }
      },
      "required": ["id", "name", "slug", "createdAt"]
    },
    "User": {
      "title": "User",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "tenantId": { "type": "string" },
        "externalId": { "type": "string" },
        "displayName": { "type": "string" },
        "email": { "type": "string" },
        "department": { "type": "string" },
        "title": { "type": "string" },
        "enabled": { "type": "boolean" },
        "onboardingDate": { "type": "string" },
        "offboardingDate": { "type": "string" },
        "lastSyncedAt": { "type": "string", "format": "date-time" }
      },
      "required": ["id", "tenantId", "externalId", "displayName", "email", "enabled"]
    },
    "Resource": {
      "title": "Resource",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "tenantId": { "type": "string" },
        "name": { "type": "string" },
        "type": { "type": "string", "enum": ["SaaS", "OnPrem", "Private Cloud", "Webshop", "IoT", "Andere"] },
        "owner": { "type": "string" },
        "url": { "type": "string" },
        "criticality": { "type": "string", "enum": ["low", "medium", "high"] }
      },
      "required": ["id", "tenantId", "name", "type", "owner", "criticality"]
    },
    "Entitlement": {
      "title": "Entitlement",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "tenantId": { "type": "string" },
        "resourceId": { "type": "string" },
        "name": { "type": "string" },
        "riskLevel": { "type": "string", "enum": ["low", "medium", "high"] }
      },
      "required": ["id", "tenantId", "resourceId", "name", "riskLevel"]
    },
    "Assignment": {
      "title": "Assignment",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "tenantId": { "type": "string" },
        "userId": { "type": "string" },
        "entitlementId": { "type": "string" },
        "status": { "type": "string", "enum": ["active", "requested", "removed"] },
        "originGroupId": { "type": "string" },
        "validFrom": { "type": "string" },
        "validUntil": { "type": "string" },
        "jiraIssueKey": { "type": "string" }
      },
      "required": ["id", "tenantId", "userId", "entitlementId", "status"]
    },
    "Bundle": {
      "title": "Bundle",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "tenantId": { "type": "string" },
        "name": { "type": "string" },
        "description": { "type": "string" },
        "entitlementIds": { "type": "array", "items": { "type": "string" } }
      },
      "required": ["id", "tenantId", "name", "entitlementIds"]
    },
    "JiraConfig": {
      "title": "JiraConfig",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "name": { "type": "string" },
        "url": { "type": "string" },
        "email": { "type": "string" },
        "apiToken": { "type": "string" },
        "projectKey": { "type": "string" },
        "issueTypeName": { "type": "string" },
        "enabled": { "type": "boolean" }
      }
    }
  },
  "auth": {
    "providers": ["password", "anonymous"]
  },
  "firestore": {
    "structure": [
      { "path": "tenants/{tenantId}", "definition": { "schema": { "$ref": "#/backend/entities/Tenant" } } },
      { "path": "users/{userId}", "definition": { "schema": { "$ref": "#/backend/entities/User" } } },
      { "path": "resources/{resourceId}", "definition": { "schema": { "$ref": "#/backend/entities/Resource" } } },
      { "path": "entitlements/{entitlementId}", "definition": { "schema": { "$ref": "#/backend/entities/Entitlement" } } },
      { "path": "assignments/{assignmentId}", "definition": { "schema": { "$ref": "#/backend/entities/Assignment" } } },
      { "path": "bundles/{bundleId}", "definition": { "schema": { "$ref": "#/backend/entities/Bundle" } } },
      { "path": "jiraConfigs/{configId}", "definition": { "schema": { "$ref": "#/backend/entities/JiraConfig" } } }
    ]
  }
}
